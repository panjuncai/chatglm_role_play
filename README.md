# ChatGLM角色扮演应用

这是一个基于智谱AI开放平台API的角色扮演应用，使用CharacterGLM实现角色扮演对话，同时结合CogView生成场景图片。

## 功能特点

- **角色扮演**：基于CharacterGLM-3模型，实现高质量的角色扮演对话
- **场景生成**：调用CogView-3模型，根据对话内容自动生成符合场景的图片
- **自定义设定**：支持自定义角色人设、用户人设和聊天背景
- **实时互动**：流式响应，实现即时对话体验

## 使用方法

1. 安装依赖：
```bash
pip install pyjwt requests streamlit zhipuai python-dotenv
```

2. 设置API密钥：
   - 在项目根目录创建`.env`文件，添加`API_KEY=您的智谱API密钥`
   - 或在应用界面的侧边栏输入API密钥

3. 启动应用：
```bash
streamlit run chatglm_role_play.py
```

## 使用指南

1. **设置角色信息**：
   - 填写聊天背景：设定本次对话的场景或故事背景
   - 填写角色名和角色人设：定义AI将扮演的角色
   - 填写用户名和用户人设（可选）：定义您在对话中的身份

2. **开始对话**：设置完成后，在输入框中输入消息即可开始对话

3. **生成图片**：点击"生成图片"按钮，系统会根据当前角色设定和对话内容生成相应的场景图片

## 技术实现

- 前端：Streamlit
- 后端：基于智谱AI开放平台API
- 模型：CharacterGLM-3（角色扮演）、ChatGLM-3（场景描述生成）、CogView-3（图像生成）

## 许可证
MIT
